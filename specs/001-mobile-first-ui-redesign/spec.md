# Feature Specification: Mobile-First UI Redesign

**Feature Branch**: `001-mobile-first-ui-redesign`
**Created**: 2025-11-04
**Status**: Draft
**Input**: User description: "Нужно проанализировать конкурентов приложения по подсчету каллорий по фото и полностью слижать чейто дизайн отказавшись от antd, 90% будут использовать приложение на телефоне и только 10% на пк"

## Clarifications

### Session 2025-11-04

- Q: Какой акцентный цвет использовать для UI (зеленый/синий/фиолетовый)? → A: Зеленый пастельный цвет с обязательным соблюдением контрастности WCAG для читаемости всех элементов
- Q: Стратегия миграции от Ant Design к shadcn/ui (полная замена сразу / постепенная / гибридная)? → A: Постепенная миграция страница-за-страницей с полным удалением antd в конце процесса
- Q: Поведение при отсутствии интернет-соединения (только онлайн / базовый офлайн / полный офлайн)? → A: Только онлайн режим - показывать понятное сообщение об ошибке при отсутствии интернета и блокировать функционал
- Q: Порядок приоритетов при миграции страниц (по user stories / по сложности / по трафику)? → A: По приоритетам user stories - US1 (фото-подсчет + дневник) → US2 (навигация) → US4 (визуальный стиль) → US3 (десктоп)
- Q: Подход к тестированию визуальной регрессии (ручное QA / ручное + автотесты / полная автоматизация)? → A: Только ручное QA - дизайнер/QA специалист проверяет каждый экран вручную перед релизом

## User Scenarios & Testing _(mandatory)_

### User Story 1 - Мобильный опыт фото-подсчета калорий (Priority: P1)

Как пользователь мобильного телефона, я хочу фотографировать еду и получать расчет калорий с интуитивно понятным, современным интерфейсом, оптимизированным для касаний и маленького экрана.

**Why this priority**: Это критическая функциональность для 90% целевой аудитории. Без качественного мобильного опыта приложение не будет конкурентоспособным.

**Independent Test**: Можно полностью протестировать открыв приложение на мобильном устройстве, сделав фото еды и убедившись, что интерфейс адаптивен, кнопки доступны для нажатия пальцем, и процесс занимает менее 30 секунд.

**Acceptance Scenarios**:

1. **Given** пользователь открывает приложение на мобильном телефоне, **When** он нажимает на кнопку добавления еды, **Then** интерфейс камеры открывается в полноэкранном режиме с крупными элементами управления (минимум 44x44px для тач-таргетов)
2. **Given** пользователь сделал фото еды, **When** система обрабатывает фото, **Then** результаты отображаются в карточном формате с крупным шрифтом (минимум 16px для основного текста), оптимизированном для чтения на мобильном экране
3. **Given** пользователь просматривает дневной журнал питания, **When** он скроллит список приемов пищи, **Then** интерфейс плавно прокручивается с анимациями не более 300ms, карточки занимают всю ширину экрана с отступами 16-24px
4. **Given** пользователь взаимодействует с интерфейсом, **When** он нажимает на любой интерактивный элемент, **Then** система предоставляет визуальную обратную связь в течение 100ms

---

### User Story 2 - Навигация и общий UX по паттернам конкурентов (Priority: P1)

Как пользователь, привыкший к популярным приложениям учета калорий (MyFitnessPal, Yazio, Lifesum), я ожидаю знакомую структуру навигации и паттерны взаимодействия.

**Why this priority**: Снижает барьер входа для новых пользователей, которые уже знакомы с конкурентами. Использование проверенных UX-паттернов улучшает usability.

**Independent Test**: Можно протестировать сравнив навигационную структуру и основные экраны с 3-5 популярными конкурентами. Пользователь должен интуитивно найти основные функции без обучения.

**Acceptance Scenarios**:

1. **Given** пользователь впервые открывает приложение, **When** он видит главный экран, **Then** присутствует нижняя навигационная панель с 3-5 основными разделами (например: Дневник, Добавить, Прогресс, Профиль) с иконками и подписями
2. **Given** пользователь находится на главном экране, **When** он хочет добавить прием пищи, **Then** присутствует крупная центральная кнопка (FAB или в центре навигации), визуально выделенная цветом или размером
3. **Given** пользователь просматривает статистику, **When** он взаимодействует с графиками и диаграммами, **Then** данные представлены в виде круговых диаграмм прогресса (как в MyFitnessPal) или цветных баров (как в Yazio)
4. **Given** пользователь работает с формами ввода данных, **When** он вводит информацию, **Then** используются паттерны из Material Design 3 или iOS HIG: четкие лейблы, валидация в реальном времени, понятные сообщения об ошибках

---

### User Story 3 - Десктопная версия (Priority: P2)

Как пользователь десктопного компьютера (10% аудитории), я хочу иметь доступ ко всем функциям приложения с адаптированным под большой экран интерфейсом.

**Why this priority**: Важно для полноты продукта, но не критично для большинства пользователей. Приоритет ниже мобильного опыта.

**Independent Test**: Можно протестировать открыв приложение в браузере на экране >1024px и убедившись, что контент использует доступное пространство, а не растягивается на всю ширину.

**Acceptance Scenarios**:

1. **Given** пользователь открывает приложение на экране шире 768px, **When** интерфейс загружается, **Then** контент центрируется с максимальной шириной 1200-1400px, используются сетки с несколькими колонками
2. **Given** пользователь на десктопе хочет добавить еду, **When** он использует мышь, **Then** присутствуют hover-эффекты на интерактивных элементах, размеры кнопок оптимизированы для курсора (минимум 32x32px)
3. **Given** пользователь просматривает дневной журнал на широком экране, **When** он видит список приемов пищи, **Then** информация представлена в табличном или grid-формате с использованием горизонтального пространства

---

### User Story 4 - Визуальный стиль по референсам конкурентов (Priority: P1)

Как пользователь, я хочу видеть современный, чистый интерфейс, соответствующий трендам 2025 года в дизайне health & fitness приложений.

**Why this priority**: Визуальная привлекательность напрямую влияет на первое впечатление и retention пользователей. Критично для конкурентоспособности.

**Independent Test**: Можно протестировать через визуальное сравнение с топ-3 конкурентами по критериям: цветовая схема, типографика, spacing, использование иконок.

**Acceptance Scenarios**:

1. **Given** пользователь просматривает любой экран приложения, **When** он оценивает визуальный стиль, **Then** используется светлая цветовая схема по умолчанию с пастельным зеленым акцентным цветом (обеспечивающим контрастность минимум 4.5:1 для текста), опциональная темная тема
2. **Given** пользователь читает текстовый контент, **When** он взаимодействует с интерфейсом, **Then** применяется современная типографическая система: sans-serif шрифт (например, Inter, SF Pro, Roboto), четкая иерархия размеров (12-14px для вспомогательного текста, 16-18px для основного, 24-32px для заголовков)
3. **Given** пользователь просматривает карточки еды, **When** он видит фотографии, **Then** изображения имеют скругленные углы (8-16px border-radius), тени (box-shadow) для создания глубины, как в современных Material Design 3 приложениях
4. **Given** пользователь взаимодействует с элементами, **When** происходят переходы между состояниями, **Then** используются плавные анимации (200-300ms ease-in-out), микроинтеракции (например, пульсация при нажатии, slide-up анимации для модальных окон)

---

### Edge Cases

- Что происходит, когда пользователь открывает приложение на планшете (768-1024px)? Интерфейс должен адаптироваться, используя гибридный подход между мобильным и десктопным дизайном.
- Как система обрабатывает устройства с нестандартным aspect ratio (например, складные телефоны, ultra-wide мониторы)? Интерфейс должен корректно масштабироваться без искажения контента.
- Что происходит при низкой скорости интернета? Скелетоны и индикаторы загрузки должны быть стилизованы в соответствии с новым дизайном, показываться пока данные загружаются.
- Что происходит при полном отсутствии интернет-соединения? Приложение должно показать понятное сообщение об ошибке с иллюстрацией и предложением проверить подключение, весь функционал блокируется до восстановления связи.
- Как обрабатываются состояния ошибок и пустых списков? Используются иллюстрации и понятные сообщения в стиле конкурентов.
- Что происходит при переключении между портретной и ландшафтной ориентацией на мобильном? Интерфейс должен мгновенно адаптироваться без потери данных.

## Requirements _(mandatory)_

### Functional Requirements

- **FR-001**: Система ДОЛЖНА обеспечивать адаптивный дизайн с брейкпоинтами: мобильный (<768px), планшет (768-1024px), десктоп (>1024px)
- **FR-002**: Все интерактивные элементы на мобильных устройствах ДОЛЖНЫ иметь минимальный размер тач-таргета 44x44px согласно WCAG и Apple HIG
- **FR-003**: Интерфейс ДОЛЖЕН быть оптимизирован для быстрой загрузки и интерактивности на мобильных устройствах (конкретные метрики в Success Criteria)
- **FR-004**: Система ДОЛЖНА постепенно мигрировать от Ant Design к shadcn/ui с Tailwind CSS, поддерживая оба фреймворка параллельно в переходный период, с полным удалением Ant Design после завершения миграции всех страниц
- **FR-005**: Дизайн ДОЛЖЕН следовать паттернам минимум 3 основных конкурентов (MyFitnessPal, Yazio, Lifesum) в части: навигационной структуры, визуализации данных о калориях, flow добавления еды
- **FR-006**: Все анимации и переходы ДОЛЖНЫ быть плавными с длительностью 200-300ms и использовать CSS transitions или современные animation API
- **FR-007**: Интерфейс ДОЛЖЕН предоставлять визуальную обратную связь на все действия пользователя в течение 100ms
- **FR-008**: Система ДОЛЖНА поддерживать как светлую, так и темную цветовые схемы в первой версии релиза
- **FR-009**: Типографика ДОЛЖНА использовать адаптивные размеры шрифтов: 14-16px для основного текста на мобильном, 16-18px на десктопе
- **FR-010**: Все изображения ДОЛЖНЫ иметь скругленные углы (8-16px) и при необходимости тени для создания визуальной глубины
- **FR-011**: Навигация на мобильных ДОЛЖНА быть реализована через bottom navigation bar с 3-5 основными разделами
- **FR-012**: Главная кнопка добавления еды (CTA) ДОЛЖНА быть визуально выделена размером или цветом и легко доступна на всех экранах
- **FR-013**: На десктопных экранах контент ДОЛЖЕН быть центрирован с максимальной шириной 1200-1400px
- **FR-014**: Все формы ввода ДОЛЖНЫ включать валидацию в реальном времени с понятными сообщениями об ошибках
- **FR-015**: Система ДОЛЖНА корректно обрабатывать смену ориентации устройства без потери введенных данных
- **FR-016**: Акцентный цвет (пастельный зеленый) ДОЛЖЕН использоваться для всех интерактивных элементов (кнопки, ссылки, активные состояния) с обязательным обеспечением контрастности минимум 4.5:1 для текста и 3:1 для UI компонентов согласно WCAG AA
- **FR-017**: Миграция ДОЛЖНА выполняться постепенно в следующем порядке приоритетов: 1) US1 - экраны фото-захвата и дневного журнала (мобильный опыт), 2) US2 - навигационные компоненты и общая структура, 3) US4 - визуальные компоненты (карточки, типографика), 4) US3 - десктопные адаптации, с сохранением работоспособности всего приложения на каждом этапе
- **FR-018**: В переходный период приложение ДОЛЖНО поддерживать оба UI фреймворка (Ant Design для немигрированных страниц, shadcn/ui для новых), обеспечивая визуальную консистентность через общие design tokens
- **FR-019**: После завершения миграции всех страниц Ant Design ДОЛЖЕН быть полностью удален из зависимостей проекта
- **FR-020**: Приложение ДОЛЖНО требовать активное интернет-соединение для работы, при отсутствии связи отображать экран ошибки с понятным сообщением и иллюстрацией
- **FR-021**: При обнаружении отсутствия интернета система ДОЛЖНА показать пользователю дружелюбное сообщение с инструкциями по проверке подключения и кнопкой "Попробовать снова"
- **FR-022**: Каждый мигрированный экран ДОЛЖЕН пройти ручную проверку дизайнером/QA специалистом на соответствие визуальным требованиям (размеры шрифтов, отступы, цвета, тени, скругления) перед деплоем
- **FR-023**: Система ДОЛЖНА показывать skeleton loaders при загрузке данных для индикации прогресса и улучшения воспринимаемой производительности при низкой скорости интернета

### Key Entities

- **Design Token System**: Централизованная система переменных для цветов (включая пастельный зеленый акцентный цвет), spacing, типографики, border-radius, shadows. Обеспечивает консистентность дизайна и упрощает будущие изменения. Все цветовые комбинации должны соответствовать минимальной контрастности WCAG AA (4.5:1 для обычного текста).
- **Breakpoint Configuration**: Определение точек переключения между мобильным, планшетным и десктопным представлениями. Включает значения для медиа-запросов и логику адаптивности.
- **Component Library**: Новый набор переиспользуемых UI компонентов, заменяющих Ant Design. Включает кнопки, карточки, формы, модальные окна, навигацию.
- **Animation Specifications**: Определение стандартных переходов, длительности анимаций, easing-функций для всех интерактивных элементов.
- **Accessibility Configuration**: Настройки для соответствия WCAG: размеры тач-таргетов, контрастность цветов, поддержка screen readers.

## Success Criteria _(mandatory)_

### Measurable Outcomes

- **SC-001**: 90% пользователей мобильных устройств могут добавить прием пищи через фото за 30 секунд или менее
- **SC-002**: Приложение загружается и становится интерактивным за 3 секунды или менее на 4G соединении на мобильном устройстве
- **SC-003**: Все интерактивные элементы имеют размер тач-таргета минимум 44x44px на мобильных устройствах (проверяется автоматическими тестами)
- **SC-004**: Визуальная обратная связь на действия пользователя появляется в течение 100ms (измеряется через performance API)
- **SC-005**: Интерфейс корректно отображается на всех брейкпоинтах (мобильный, планшет, десктоп) без горизонтального скролла или обрезанного контента
- **SC-006**: Время до первого contentful paint (FCP) не превышает 1.8 секунд на мобильных устройствах
- **SC-007**: Все текстовые элементы имеют достаточную контрастность (минимум 4.5:1 для обычного текста, 3:1 для крупного) согласно WCAG AA
- **SC-008**: Пастельный зеленый акцентный цвет используется консистентно во всех интерактивных элементах с гарантированной читаемостью (контрастность проверяется автоматическими accessibility тестами)
- **SC-009**: Сообщение об отсутствии интернета отображается в течение 3 секунд после потери соединения и остается видимым до восстановления связи

### Assumptions

1. **Design Reference**: Предполагается анализ следующих конкурентов: MyFitnessPal, Yazio, Lifesum как основные референсы для UX/UI паттернов
2. **Component Framework**: Используется shadcn/ui с Tailwind CSS вместо Ant Design для построения UI компонентов. Миграция выполняется постепенно с временным сосуществованием обоих фреймворков
3. **Dark Mode**: Темная тема реализуется в Phase 5 (после MVP). MVP (Phase 1-3) включает только светлую тему, темная тема добавляется позже для полноты продукта
4. **Browser Support**: Предполагается поддержка последних 2 версий основных браузеров (Chrome, Safari, Firefox, Edge)
5. **Mobile OS**: Предполагается поддержка iOS 14+ и Android 10+ как минимальные версии ОС
6. **Performance Budget**: Предполагается максимальный размер JavaScript bundle 200KB (gzipped) для мобильной версии
7. **Animation Performance**: Предполагается использование CSS transforms и opacity для анимаций, чтобы обеспечить 60 FPS
8. **Responsive Images**: Предполагается использование современных форматов изображений (WebP, AVIF) с fallback на JPEG/PNG
9. **Color Palette**: Пастельный зеленый цвет используется как основной акцентный цвет с вариациями оттенков для светлой и темной тем, обеспечивающими требуемую контрастность
10. **Network Dependency**: Приложение требует постоянного интернет-соединения, офлайн режим не поддерживается в первой версии
11. **Migration Order**: Миграция выполняется в порядке приоритетов user stories для максимизации ценности на ранних этапах - начиная с критичных мобильных экранов (90% пользователей)
12. **Visual QA**: Визуальное соответствие дизайну проверяется ручным QA процессом, автоматизированные visual regression тесты не используются в первой версии

### Dependencies

- Доступность референсных дизайнов или возможность провести анализ конкурентов (MyFitnessPal, Yazio, Lifesum)
- Настройка shadcn/ui и Tailwind CSS в проекте, настройка темизации для поддержки светлой и темной тем
- Разработчик создает design tokens (colors, spacing, typography) на основе анализа конкурентов из research.md. Профессиональный дизайнер опционален - если доступен, он может выполнить финальную полировку UI kit и подобрать точные оттенки пастельного зеленого цвета
- Существующий функционал приложения должен быть сохранен при миграции на новый UI, миграция выполняется инкрементально
- План миграции страниц должен следовать определенному порядку: US1 (критичные мобильные экраны) → US2 (навигация) → US4 (визуальный стиль) → US3 (десктопные адаптации)
- Инструменты для автоматической проверки контрастности (например, axe DevTools, WAVE) для валидации цветовой схемы
- Дизайнер или QA специалист должен быть доступен для ручной проверки каждого мигрированного экрана перед релизом

### Out of Scope (первая версия)

- Поддержка устаревших браузеров (IE11, старые версии Safari)
- Кастомная анимационная библиотека (используются стандартные CSS transitions/animations)
- A/B тестирование различных дизайн-вариантов (выбирается один подход на основе анализа конкурентов)
- Аналитика и метрики usability (например, измерение процента пользователей находящих функции без подсказок) - может быть добавлено в v2
- Accessibility features выше уровня WCAG AA (например, WCAG AAA контрастность)
- Офлайн режим и локальное кеширование данных (может быть добавлено в v2)
- Service Workers и Progressive Web App функциональность
- Автоматизированные visual regression тесты (Chromatic, Percy, Playwright visual testing)
- Скриншотные snapshot тесты компонентов
